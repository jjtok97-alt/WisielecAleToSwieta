<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ðŸŽ„ ÅšwiÄ…teczny Wisielec â€” Choinka z bombkami ðŸŽ…</title>
<style>
:root{
  --bg1:#c21807;
  --bg2:#1b5e20;
  --card-bg: rgba(255 255 255 / 0.15);
  --accent: #f9d342;
}
*{box-sizing:border-box}
body{
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  color: white;
  padding: 20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  margin:0;
}
h1{
  font-weight:700;
  text-shadow:2px 2px 4px #000;
  margin-bottom:12px;
  text-align:center;
}

/* layout */
.container {
  display:flex;
  gap:24px;
  align-items:flex-start;
  width:100%;
  max-width:1000px;
  justify-content:center;
  flex-wrap:wrap;
}

/* tree card */
.tree-card{
  background: var(--card-bg);
  padding:12px;
  border-radius:10px;
  border:2px solid rgba(255 255 255 / 0.45);
  box-shadow:0 0 12px rgba(0,0,0,0.45);
  width:360px;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* image wrapper */
.tree-wrap {
  position:relative;
  width:100%;
  background:transparent;
  border-radius:8px;
  overflow:visible;
}
.tree-wrap img{
  display:block;
  width:100%;
  height:auto;
  border-radius:8px;
  background: transparent;
}

/* ornaments */
.orn {
  position:absolute;
  font-size:28px;
  pointer-events:none;
  transition: transform 0.45s ease, opacity 0.45s ease;
  transform-origin:center;
}
@keyframes fall {
  0%{ transform: translateY(0) rotate(0deg); opacity:1; }
  80%{ opacity:1; }
  100%{ transform: translateY(260px) rotate(360deg); opacity:0; }
}
.fall { animation: fall 900ms ease-in forwards; }
.hidden { opacity:0; transform:scale(0.3); }

/* right panel */
.panel {
  background: var(--card-bg);
  padding:16px;
  border-radius:10px;
  border:2px solid rgba(255 255 255 / 0.45);
  box-shadow:0 0 12px rgba(0,0,0,0.45);
  width:420px;
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:center;
}

/* word display */
.word {
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:6px;
  min-height:100px;
}
.letter {
  width:28px;
  height:38px;
  border-radius:6px;
  background: rgba(255 255 255 / 0.9);
  color: var(--bg2);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:16px;
}
.row {
  display:flex;
  gap:5px;
  justify-content:center;
}

/* info */
.info {
  font-size:1rem;
  text-shadow:1px 1px 2px #000;
  text-align:center;
  min-height:22px;
}
.result {
  font-size:1rem;
  font-weight:700;
  color: var(--accent);
  text-shadow:1px 1px 2px #000;
}

/* input for mobile */
input#letterInput {
  padding:8px;
  font-size:16px;
  border-radius:8px;
  border:none;
  text-transform:uppercase;
  text-align:center;
  width:60px;
  outline:none;
}

/* responsive */
@media (max-width:880px){
  .container{ flex-direction:column; align-items:center }
  .panel{ width:92% }
  .tree-card{ width:92% }
}
</style>
</head>
<body>
<h1>ðŸŽ„ ÅšwiÄ…teczny Wisielec â€” choinka z bombkami ðŸŽ…</h1>

<div class="container">
  <div class="tree-card">
    <div class="tree-wrap" id="treeWrap">
      <img src="images/choinka.png" alt="Choinka" id="treeImg" class="choinka">
      <span class="orn" id="orn0">ðŸ”´</span>
      <span class="orn" id="orn1">ðŸŸ¢</span>
      <span class="orn" id="orn2">ðŸ”µ</span>
      <span class="orn" id="orn3">ðŸŸ¡</span>
      <span class="orn" id="orn4">ðŸŸ£</span>
      <span class="orn" id="orn5">âšª</span>
      <span class="orn" id="orn6">ðŸŸ </span>
    </div>
    <div style="margin-top:10px; font-size:0.95rem;" class="info">
      BÅ‚Ä™dy: <span id="wrongCount">0</span> / <span id="maxWrong">7</span>
    </div>
  </div>

  <div class="panel">
    <div class="word" id="word"></div>
    <div class="info" id="message">Wpisz literÄ™ z klawiatury lub uÅ¼yj pola poniÅ¼ej.</div>
    <input type="text" id="letterInput" maxlength="1" autofocus />
    <div class="result" id="result"></div>
  </div>
</div>

<script>
const ANSWER = "GORÄ„CA CZEKOLADA";
const MAX_WRONG = 7;
const ORN_POSITIONS = [
  {left: 56, top: 18},
  {left: 34, top: 26},
  {left: 68, top: 36},
  {left: 44, top: 46},
  {left: 62, top: 54},
  {left: 28, top: 60},
  {left: 50, top: 72}
];
let revealed = [];
let wrong = 0;
let finished = false;

const wordBox = document.getElementById('word');
const messageEl = document.getElementById('message');
const wrongCountEl = document.getElementById('wrongCount');
const resultEl = document.getElementById('result');
const treeWrap = document.getElementById('treeWrap');
const inputEl = document.getElementById('letterInput');

document.getElementById('maxWrong').textContent = MAX_WRONG;

function positionOrnaments(){
  ORN_POSITIONS.forEach((pos, idx) => {
    const el = document.getElementById(`orn${idx}`);
    if(!el) return;
    el.style.left = pos.left + '%';
    el.style.top = pos.top + '%';
    el.classList.remove('fall','hidden');
    el.style.opacity = 1;
  });
}

function renderWord(){
  wordBox.innerHTML = '';
  const lines = ["GORÄ„CA", "CZEKOLADA"];
  lines.forEach(word => {
    const row = document.createElement('div');
    row.className = 'row';
    for(const ch of word){
      const div = document.createElement('div');
      div.className = 'letter';
      div.textContent = revealed.includes(ch) ? ch : '';
      row.appendChild(div);
    }
    wordBox.appendChild(row);
  });
}

const VALID_LETTERS = Array.from("AÄ„BCÄ†DEÄ˜FGHIJKLÅMNOÃ“PQRSTUUVWXYZÅ¹Å»");

function handleGuess(letter){
  if(finished) return;
  if(revealed.includes(letter)) {
    messageEl.textContent = `Litera "${letter}" juÅ¼ odsÅ‚oniÄ™ta.`;
    return;
  }
  if(ANSWER.includes(letter)){
    revealed.push(letter);
    renderWord();
    messageEl.textContent = `âœ… Litera "${letter}" jest w haÅ›le!`;
    checkWin();
  } else {
    wrong++;
    wrongCountEl.textContent = wrong;
    messageEl.textContent = `âŒ Litera "${letter}" nie wystÄ™puje.`;
    dropOrnament(wrong - 1);
    checkLose();
  }
  inputEl.value = '';
}

inputEl.addEventListener('input', (e)=>{
  const val = e.target.value.toUpperCase();
  if(VALID_LETTERS.includes(val)){
    handleGuess(val);
  } else {
    e.target.value = '';
  }
});

function dropOrnament(idx){
  const el = document.getElementById(`orn${idx}`);
  if(!el) return;
  el.classList.add('fall');
  setTimeout(()=> el.classList.add('hidden'), 950);
}

function uniqueLetters(word){
  return Array.from(new Set(word.replaceAll(' ','').split('')));
}

function checkWin(){
  const uniques = uniqueLetters(ANSWER);
  const all = uniques.every(ch => revealed.includes(ch));
  if(all){
    finished = true;
    resultEl.textContent = `ðŸŽ‰ Brawo! HasÅ‚o: ${ANSWER}`;
    messageEl.textContent = 'UratowaÅ‚eÅ› wszystkie bombki!';
  }
}
function checkLose(){
  if(wrong >= MAX_WRONG){
    finished = true;
    resultEl.textContent = `ðŸ’¥ PrzegraÅ‚eÅ› â€” hasÅ‚o: ${ANSWER}`;
    messageEl.textContent = 'Bombki spadÅ‚y...';
    document.querySelectorAll('.orn').forEach((el)=>{
      if(!el.classList.contains('fall')){
        el.classList.add('fall');
        setTimeout(()=> el.classList.add('hidden'), 950);
      }
    });
  }
}

function startGame(){
  revealed = [];
  wrong = 0;
  finished = false;
  wrongCountEl.textContent = 0;
  resultEl.textContent = '';
  messageEl.textContent = 'Wpisz literÄ™ z klawiatury lub uÅ¼yj pola poniÅ¼ej.';
  positionOrnaments();
  renderWord();
  inputEl.focus();
}

window.addEventListener('resize', positionOrnaments);

const img = document.getElementById('treeImg');
if(img.complete){
  positionOrnaments();
  startGame();
} else {
  img.addEventListener('load', () => {
    positionOrnaments();
    startGame();
  });
}
</script>
</body>
</html>

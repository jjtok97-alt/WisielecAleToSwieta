<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ðŸŽ„ ÅšwiÄ…teczny Wisielec â€” Choinka z bombkami ðŸŽ…</title>
<style>
:root{
  --bg1:#c21807;
  --bg2:#1b5e20;
  --card-bg: rgba(255 255 255 / 0.15);
  --accent: #f9d342;
}
*{box-sizing:border-box}
body{
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  color: white;
  padding: 20px;
  display:flex;
  flex-direction:column;
  align-items:center;
  min-height:100vh;
  margin:0;
}
h1{
  font-weight:700;
  text-shadow:2px 2px 4px #000;
  margin-bottom:12px;
  text-align:center;
}

/* layout */
.container {
  display:flex;
  gap:24px;
  align-items:flex-start;
  width:100%;
  max-width:1000px;
  justify-content:center;
  flex-wrap:wrap;
}

/* tree card */
.tree-card{
  background: var(--card-bg);
  padding:12px;
  border-radius:10px;
  border:2px solid rgba(255 255 255 / 0.45);
  box-shadow:0 0 12px rgba(0,0,0,0.45);
  width:360px;
  display:flex;
  flex-direction:column;
  align-items:center;
}

/* image wrapper */
.tree-wrap {
  position:relative;
  width:100%;
  background:transparent;
  border-radius:8px;
  overflow:visible;
}
.tree-wrap img{
  display:block;
  width:100%;
  height:auto;
  border-radius:8px;
  background: transparent;
  filter: drop-shadow(0 0 12px rgba(0,0,0,0.4));
}

/* ornaments */
.orn {
  position:absolute;
  font-size:28px;
  pointer-events:none;
  transition: transform 0.45s ease, opacity 0.45s ease;
  transform-origin:center;
}
@keyframes fall {
  0%{ transform: translateY(0) rotate(0deg); opacity:1; }
  80%{ opacity:1; }
  100%{ transform: translateY(260px) rotate(360deg); opacity:0; }
}
.fall { animation: fall 900ms ease-in forwards; }
.hidden { opacity:0; transform:scale(0.3); }

/* right panel */
.panel {
  background: var(--card-bg);
  padding:16px;
  border-radius:10px;
  border:2px solid rgba(255 255 255 / 0.45);
  box-shadow:0 0 12px rgba(0,0,0,0.45);
  width:420px;
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:center;
}

/* sÅ‚owo */
.word {
  display:flex;
  gap:5px;
  flex-wrap:wrap;
  justify-content:center;
  min-height:60px;
  max-width: 340px;
}
.letter {
  width:30px;
  height:40px;
  border-radius:6px;
  background: rgba(255 255 255 / 0.9);
  color: var(--bg2);
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:16px;
}
.space {
  background: transparent;
  border: none;
  width:20px;
  height:40px;
}

/* info */
.info {
  font-size:1rem;
  text-shadow:1px 1px 2px #000;
  text-align:center;
  min-height:22px;
}
.result {
  font-size:1rem;
  font-weight:700;
  color: var(--accent);
  text-shadow:1px 1px 2px #000;
}

/* input mobilny */
#mobileInput {
  opacity: 0;
  position: absolute;
  top: -50px;
}

/* responsive */
@media (max-width:880px){
  .container{ flex-direction:column; align-items:center }
  .panel{ width:92% }
  .tree-card{ width:92% }
}
</style>
</head>
<body>
<h1>ðŸŽ„ ÅšwiÄ…teczny Wisielec â€” choinka z bombkami ðŸŽ…</h1>

<div class="container">
  <div class="tree-card" aria-hidden="false">
    <div class="tree-wrap" id="treeWrap" aria-hidden="true">
      <img src="images/choinka.png" alt="Choinka" id="treeImg">
      <span class="orn" id="orn0">ðŸ”´</span>
      <span class="orn" id="orn1">ðŸŸ¢</span>
      <span class="orn" id="orn2">ðŸ”µ</span>
      <span class="orn" id="orn3">ðŸŸ¡</span>
      <span class="orn" id="orn4">ðŸŸ£</span>
      <span class="orn" id="orn5">âšª</span>
      <span class="orn" id="orn6">ðŸŸ </span>
    </div>

    <div style="margin-top:10px; font-size:0.95rem;" class="info">
      BÅ‚Ä™dy: <span id="wrongCount">0</span> / <span id="maxWrong">7</span>
    </div>
  </div>

  <div class="panel" role="application" aria-label="Gra Wisielec">
    <div class="word" id="word"></div>
    <div class="info" id="message">Kliknij poniÅ¼ej, by wpisaÄ‡ literÄ™ ðŸ‘‡</div>
    <input id="mobileInput" type="text" maxlength="1" autocomplete="off" autocapitalize="characters" />
    <div class="result" id="result"></div>
  </div>
</div>

<script>
const ANSWER = "GORÄ„CA CZEKOLADA";
const MAX_WRONG = 7;
const ORN_COUNT = 7;
const ORN_POSITIONS = [
  {left: 56, top: 18},
  {left: 34, top: 26},
  {left: 68, top: 36},
  {left: 44, top: 46},
  {left: 62, top: 54},
  {left: 28, top: 60},
  {left: 50, top: 72}
];
let revealed = [];
let wrong = 0;
let finished = false;

const wordBox = document.getElementById('word');
const messageEl = document.getElementById('message');
const wrongCountEl = document.getElementById('wrongCount');
const resultEl = document.getElementById('result');
const treeWrap = document.getElementById('treeWrap');
const input = document.getElementById('mobileInput');

function positionOrnaments(){
  ORN_POSITIONS.forEach((pos, idx) => {
    const el = document.getElementById(`orn${idx}`);
    if(!el) return;
    el.style.left = pos.left + '%';
    el.style.top = pos.top + '%';
    el.classList.remove('fall','hidden');
    el.style.opacity = 1;
  });
}

function renderWord(){
  wordBox.innerHTML = '';
  const words = ANSWER.split(' ');
  for(let i=0;i<words.length;i++){
    for(const ch of words[i]){
      const div = document.createElement('div');
      div.className = 'letter';
      div.textContent = revealed.includes(ch) ? ch : '';
      wordBox.appendChild(div);
    }
    if(i < words.length - 1){
      const sp = document.createElement('div');
      sp.className = 'space';
      wordBox.appendChild(sp);
    }
  }
}

const VALID_LETTERS = Array.from("AÄ„BCÄ†DEÄ˜FGHIJKLÅMNOÃ“PQRSTUUVWXYZÅ¹Å»");

function handleGuess(letter){
  if(finished) return;
  if(revealed.includes(letter)) {
    messageEl.textContent = `Litera "${letter}" juÅ¼ odsÅ‚oniÄ™ta.`;
    return;
  }
  if(ANSWER.includes(letter)){
    revealed.push(letter);
    renderWord();
    messageEl.textContent = `Dobra! Litera "${letter}" jest w haÅ›le.`;
    checkWin();
  } else {
    wrong++;
    wrongCountEl.textContent = wrong;
    messageEl.textContent = `Niestety â€” litera "${letter}" nie wystÄ™puje.`;
    dropOrnament(wrong - 1);
    checkLose();
  }
  input.value = '';
}

function dropOrnament(idx){
  const el = document.getElementById(`orn${idx}`);
  if(!el) return;
  el.classList.add('fall');
  setTimeout(()=> el.classList.add('hidden'), 950);
}

function uniqueLetters(word){
  return Array.from(new Set(word.replaceAll(' ','').split('')));
}

function checkWin(){
  const uniques = uniqueLetters(ANSWER);
  const all = uniques.every(ch => revealed.includes(ch));
  if(all){
    finished = true;
    resultEl.textContent = `ðŸŽ‰ Brawo! HasÅ‚o: ${ANSWER}`;
    messageEl.textContent = 'UratowaÅ‚eÅ› wszystkie bombki!';
  }
}
function checkLose(){
  if(wrong >= MAX_WRONG){
    finished = true;
    resultEl.textContent = `ðŸ’¥ PrzegraÅ‚eÅ› â€” hasÅ‚o: ${ANSWER}`;
    messageEl.textContent = 'Bombki spadÅ‚y...';
    for(let i=0;i<ORN_COUNT;i++){
      const el = document.getElementById(`orn${i}`);
      if(el && !el.classList.contains('fall')){
        el.classList.add('fall');
        setTimeout(()=> el.classList.add('hidden'), 950);
      }
    }
  }
}

function startGame(){
  revealed = [];
  wrong = 0;
  finished = false;
  wrongCountEl.textContent = 0;
  resultEl.textContent = '';
  messageEl.textContent = 'Kliknij poniÅ¼ej, by wpisaÄ‡ literÄ™ ðŸ‘‡';
  positionOrnaments();
  renderWord();
}

window.addEventListener('resize', positionOrnaments);

window.addEventListener('keydown', (e)=>{
  if(finished) return;
  let key = e.key || '';
  if(key.length !== 1) return;
  key = key.toUpperCase();
  if(!VALID_LETTERS.includes(key)) return;
  handleGuess(key);
});

input.addEventListener('input', (e)=>{
  let val = e.target.value.toUpperCase();
  if(val && VALID_LETTERS.includes(val)){
    handleGuess(val);
  }
});

const img = document.getElementById('treeImg');
if(img.complete){
  positionOrnaments();
  startGame();
} else {
  img.addEventListener('load', () => {
    positionOrnaments();
    startGame();
  });
}

// pozwÃ³l kliknÄ…Ä‡ panel, aby aktywowaÄ‡ klawiaturÄ™
document.querySelector('.panel').addEventListener('click', ()=>{
  input.focus();
});
</script>
</body>
</html>
